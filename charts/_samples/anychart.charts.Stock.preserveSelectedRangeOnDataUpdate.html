<html>
<head>
    <meta charset="UTF-8"/>
    <meta name="x-cat-tags" content="anyStock"/>
    <script src="../../anychart-base.min.js"></script>
    <script src="../../anychart-stock.min.js"></script>
    <script src="../../anychart-table.min.js"></script>
    <script src="../../anychart-exports.min.js"></script>
    <script src="../../anychart-ui.min.js"></script>
    <script src="https://cdn.anychart.com/csv-data/dji-daily-short.js" data-export="true"></script>
    <script x-export="stage">
        anychart.onDocumentReady(function () {
            stage = anychart.graphics.create("container");

            var dataTable = anychart.data.table();
            dataTable.addData(get_dji_daily_short_data());

            var chart1 = anychart.stock();
            chart1.bottom("50%");

            var plot1 = chart1.plot();
            plot1.line(dataTable.mapAs({"value": 1}));

            var scroller1 = chart1.scroller();
            scroller1.line(dataTable.mapAs({"value": 1}));

            // Move scroller.
            chart1.preserveSelectedRangeOnDataUpdate(true);

            chart1.selectRange("2008-06-05", "2009-02-01");

            chart1.title("Set scroller state");
            chart1.container(stage);
            chart1.draw();

            var chart2 = anychart.stock();
            chart2.top("50%");

            var plot2 = chart2.plot();
            plot2.line(dataTable.mapAs({"value": 1}));

            var scroller2 = chart2.scroller();
            scroller2.line(dataTable.mapAs({"value": 1}));

            chart2.preserveSelectedRangeOnDataUpdate(false);

            chart2.selectRange("2008-06-05", "2009-02-01");

            chart2.container(stage);
            chart2.draw();

            var label = anychart.standalones.label();
            label.background({fill: "#BDBDBD", stroke: "#9E9E9E"});
            label.fontColor("#FAFAFA");
            label.text("Data generation");
            label.padding(2);

            var date = new Date(2010, 1, 3);

            label.listen("click", function () {
                var newData = [];
                for (var i = 0; i < 500; i++) {
                    var time = date.getTime();
                    newData.push([time, 500]);
                    date.setTime(time + 1000 * 60 * 60 * 24);
                }
                dataTable.addData(newData);
            });
            label.listen("mouseOver", function () {
                document.body.style.cursor = "pointer";
            });
            label.listen("mouseOut", function () {
                document.body.style.cursor = "auto";
            });
            label.container(stage);
            label.draw();
        });
    </script>
</head>
<body>
<div id="container" style="width: 100%; height: 100%"></div>
</body>
</html>